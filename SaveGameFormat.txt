FTL Decode

Notes:
All values are little endian
Numbers and Booleans are 4 bytes long
Strings have a 4 byte length prefix and are not null or zero terminated



### Header
Number - File Version (Currently 09)
Boolean - Is Advanced Edition
Number - Difficulty (00: Easy, 01: Normal, 02: Hard)
Number - Ships Defeated
Number - Beacons Explored
Number - Scrap Collected
Number - Total Crew Hired
String - Ship Name
String - Ship Blueprint ID
Number - Sector Number (One-based)
Number - (unknown)       00 00 00 00
Number - State Count
|- String - State ID
|- Number - State Value
String - Ship Blueprint ID (Same as above)
String - Ship Name         (Same as above)
String - Ship Gfx Base Name

# Inital Crew
Number - Initial Crew Count
|-String - Race
|-String - Name

### Ship Data
Boolean - Is Hostile
Number - Jump Charge Ticks
Boolean - Is Jumping
Number - Jump Animation Ticks
Number - Health (Hull)
Number - Fuel
Number - Drones
Number - Missiles
Number - Cash (Scrap)

### Crew
Number - Crew Count
|-String - Name
|-String - Race
|-Boolean - Is Enemy Boarding Drone
|-Number - Health
|-Number - Sprite X
|-Number - Sprite Y
|-Number - Room Id
|-Number - Room Square
|-Boolean - Player Controlled
|-Number - Clone Ready
|-Number - Death Order (Same as Clonebay Priority...)
|-Number - Tint Count
  |-Number - Tint Index
|-Boolean - Is Mind Controlled
|-Number - Saved Room Square
|-Number - Saved Room ID
|-Number - Pilot Skill
|-Number - Engine Skill
|-Number - Shield Skill
|-Number - Weapon Skill
|-Number - Repair Skill
|-Number - Combat Skill
|-Boolean - Is Male
|-Number - Repairs
|-Number - Combat Kills
|-Number - Piloted Evasions
|-Number - Jumps Survived
|-Number - Skill Masteries
|-Number - Stun Ticks
|-Number - Health Boost
|-Number - Clonebay Priority (Same as Death Order...)
|-Number - Damage Boost
|-Number - (unknown)
|-Number - Universal Death Count
|-Number - Pilot Mastery Level 1
|-Number - Pilot Mastery Level 2
|-Number - Engine Mastery Level 1
|-Number - Engine Mastery Level 2
|-Number - Shield Mastery Level 1
|-Number - Shield Mastery Level 2
|-Number - Weapon Mastery Level 1
|-Number - Weapon Mastery Level 2
|-Number - Repair Mastery Level 1
|-Number - Repair Mastery Level 2
|-Number - Combat Mastery Level 1
|-Number - Combat Mastery Level 2
|-Boolean - (unknown)
# -- Teleport Animation -- #
|-Boolean - Is Playing
|-Boolean - Is Looping
|-Number - CurrentFrame
|-Number - ProgressTicks
|-Number - Scale
|-Number - X
|-Number - Y
# -- /Teleport Animation -- #
|-Boolean - (unknown)
# -- IF CRYSTAL -- #
|-Number - Lockdown Recharge Tick
|-Number - Lockdown Recharge Tick Goal
|-Number - (unknown)
# -- /IF CRYSTAL -- #

### Reserve Power
Number - Reserve Power Capacity

### Systems
# Normally systems are 28 bytes, but if not present on the
# ship, capacity will be zero, and the system will only
# occupy the 4 bytes that declared the capacity. And the
# next system will begin 24 bytes sooner.
# System info is stored in this order:
# |-SHIELDS
# |-ENGINES
# |-OXYGEN
# |-WEAPONS
# |-DRONE_CTRL
# |-MEDBAY
# |-PILOT
# |-SENSORS
# |-DOORS
# |-TELEPORTER
# |-CLOAKING
# |-ARTILLERY
# -- IF AE -- #
# |-BATTERY
# |-CLONEBAY
# |-MIND
# |-HACKING
# -- /IF AE -- #
|-Number - System Capacity
|-Number - Power
|-Number - Damage
|-Number - Ionized
|-Number - De-ionization Ticks
|-Number - Repair Progress
|-Number - Damage Progress
|-Number - Battery Power Level
|-Number - Hack Level
|-Number - Temp Capacity Cap
|-Number - Temp Capacity Loss
|-Number - Temp Capacity Divisor

# Clonebay info (Only if Clonebay Capacity > 0)
Number - Regen Ticks
Number - Regen Ticks Goal
Number - Doom Ticks

# Battery info (Only if Battery Capacity > 0)
Number - Active (BOOL)
Number - Used Battery 
Number - Discharge Ticks

# Shield info  (Always, even if Shield Capacity == 0)
Number - Shield Layers
Number - Energy Shield Layers
Number - Energy Shield Max
Number - Shield Recharge Ticks
Boolean - Is Drop Animation On
Number - Drop Animation Ticks
Boolean - Is Raise Animation On
Number - Raise Animation Ticks
Boolean - Is Energy Shield Animation On
Number - Energy Shield Animation Ticks
Number - Shields Down X?
Number - Shields Down Y?

# Cloaking info (Only if Cloaking Capacity > 0)
Number - (unknown)
Number - (unknown)
Number - Cloak Ticks Goal
Number - Cloak Ticks

### Rooms (Count must be grabbed from layout file)
|-Number - Oxygen Level
|-(# of Squares Grabbed from layout file)
  |-4 bytes     Fire Health
  |-4 bytes     Ignition Progress
  |-4 bytes     Extinguishment Progress
|-Number - Station Square
|-Number - Station Direction (00: Down, 01: Right, 02:Up, 03: Left, 04: None)

### Breaches
Number - Breach Count
|-Number - Breach X
|-Number - Breach Y
|-Number - Breach Health

### Doors (Count must be grabbed from layout file)
|-Number - Current Max Health
|-Number - Health
|-Number - Nominal Health
|-Boolean - Open
|-Boolean - Walking Through
|-Number - (unknown)
|-Number - Drone Lockdown?

### Cloak Animation
Number - Cloak Animation Ticks

### Crystal Lockdown
Number - Crystal Count
|-Number - Current Position X
|-Number - Current Position Y
|-Number - Speed
|-Number - Goal Position X
|-Number - Goal Position Y
|-Boolean - Has Arrived
|-Boolean - Is Done
|-Number - Lifetime
|-Boolean - Is Super Freeze
|-Number - Locking Room
|-Number - Animation Direction
|-Number - Shard Progress

### Weapons
Number - Weapon Count
|-String - Weapon Name
|-Number - Armed (00-No 01-YES)

### Drones
Number - Drone Count
|-Number - String Length (Done Type)
|-StringDrone Type
|-Number - Armed (BOOL)
|-Number - Player Controlled (BOOL)
|-Number - Body X
|-Number - Body Y
|-Number - Body Room ID
|-Number - Body Room Square
|-Number - Health

### Augments
Number - Augment Count
|-Number - String Length (Augment Name)
|-StringAugment Name

### Cargo
Number - Cargo Count
|-Number - String Length (Cargo ID)
|-StringCargo ID

### Sector
Number - Sector Tree Seed
Number - Sector Layout Seed
Number - Rebel Fleet Offset
Number - Rebel Fleet Fudge
Number - Rebel Pursuit Mod
Number - Current Beacon ID
Number - (unknown) (BOOL)
Number - (unknown)
Number - Sector Hazards Visible (BOOL)
Number - Rebel Flagship Visible (BOOL)
Number - Rebel Flagship Hop
Number - Rebel Flagship Moving (BOOL)
Number - (unknown)
Number - Rebel Flagship Base Turns
Number - Sector Count
|-Number - (unknown) (BOOL)
Number - Sector Number
Number - Is Sector Hidden Crystal Worlds? (BOOL)

### Beacons
Number - Beacon Count
|-Number - Visit Count
|-# -- IF Visit Count > 0 -- #
  |-4 bytes     Bg Starscape Img Inner Path
  |-4 bytes     Bg Sprite Img Inner Path
  |-4 bytes     Bg Sprite Pos X
  |-4 bytes     Bg Sprite Pos Y
  |-4 bytes     Bg Sprite Rotation
|-# -- /IF Visit Count > 0 -- #
|-Number - Seen (BOOL)
|-Number - Enemy Present (BOOL)
|-# -- IF Enemy Present -- #
  |-4 bytes     String Length (Ship Event ID)
  |-n bytes     Ship Event ID
  |-4 bytes     String Length (Auto BlueprNumber ID)
  |-n bytes     Auto BlueprNumber ID
  |-4 bytes     String Length (Ship Event Seed)
  |-n bytes     Ship Event Seed
|-# -- /IF Enemy Present -- #
|-Number - Fleet Presence (00: None, 01: Rebel, 02: Federation, 03: Both)
|-Number - Under Attack (BOOL)
|-Number - Store Present (BOOL)
|-# -- IF Store Present -- #
  |-4 bytes     Shelf Count
    |-4 bytes   Item Type (00: Weapon, 01: Drone, 02: Augment, 03: Crew, 04: System)
    |-# Repeated 3 times
      |-4 bytes Availability ((-1): No Item, 00: Bought Already, 01: Buyable)
      |-4 bytes String Length (Item ID)
      |-n bytes Item ID
      |-4 bytes Extra Data
  |-4 bytes     Fuel
  |-4 bytes     Missiles
  |-4 bytes     Drone Parts
|-# -- /IF Store Present -- #
### Quests
Number - Quest Event Count
|-Number - String Length (Quest Event ID)
|-StringQuest Event ID
|-Number - Quest Beacon ID
Number - Distant Quest Event Count
|-Number - String Length (Distant Quest Event ID)
|-StringDistant Quest Event ID
###
Number - (unknown)
### Encounter
Number - Ship Even Seed (Matches Beacon Seed)
Number - String Length (Surrender Event ID)
String - Surrender Event ID
Number - String Length (Escape Event ID)
String - Escape Event ID
Number - String Length (Destroyed Event ID)
String - Destroyed Event ID
Number - String Length (Dead Crew Event ID)
String - Dead Crew Event ID
Number - String Length (Got Away Event ID)
String - Got Away Event ID
Number - String Length (Last Event ID)
String - Last Event ID
Number - String Length (Text)
String - Text
Number - Affected Crew Seed
Number - Choice Count
|-Number - Choice ID
### 
Number - Ship Nearby (BOOL)
# -- IF Ship Nearby -- #
|-Number - Rebel Flagship Nearby (BOOL)
|-######NEARBY SHIP DETAILS######
|-# AI Details
|-Number - Surrendered (BOOL)
|-Number - Escaping (BOOL)
|-Number - Destroyed (BOOL)
|-Number - Surrender Threshold
|-Number - Escape Threshold
|-Number - Escape Ticks
|-Number - Stalemate Triggered (BOOL)
|-Number - Stalemate Ticks
|-Number - Boarding Attempts
|-Number - Boarders Needed
# -- /IF Ship Nearby -- #
### Environment
Number - Red Giant Level
Number - Pulsar Level
Number - PDS Level
Number - Hazard Vulnerability (00: Player Ship, 01: Nearby Ship, 02: Both Ships)
Number - Asteroids Present (BOOL)
# -- IF Asteroids Present -- #
|-Number - (unknown)
|-Number - Stray Rock Ticks
|-Number - (unknown)
|-Number - Bg Drift Ticks
|-Number - Current Target
# -- /IF Asteroids Present -- #
Number - Solar Flare Fade Ticks
Number - Havoc Ticks
Number - PDS Ticks
### Zeus
Number - Projectile Count
|-Number - Projectile Type (00: Invalid, 01: Laser/Burst, 02: Rock/Explosion, 03: Missile, 04: Bomb, 05: Beam)
|-# -- IF NOT Projectile Type == 00 -- #
  |-4 bytes     Current Position X
  |-4 bytes     Current Position Y
  |-4 bytes     Previous Position X
  |-4 bytes     Previous Position Y
  |-4 bytes     Speed
  |-4 bytes     Goal Position X
  |-4 bytes     Goal Position Y
  |-4 bytes     Heading
  |-4 bytes     Owner ID
  |-4 bytes     Self ID
  |-4 bytes     Damage
  |-4 bytes     Lifespan
  |-4 bytes     Destination Space
  |-4 bytes     Target ID
  |-4 bytes     Dead (BOOL)
  |-4 bytes     String Length (Death Animation ID)
  |-n bytes     Death Animation ID
  |-4 bytes     String Length (Flight Animation ID)
  |-n bytes     Flight Animation ID
  |-#####DEATH ANIMATION######
  |-#####FLIGHT ANIMATION######
  |-4 bytes     Velocity X
  |-4 bytes     Velocity Y
  |-4 bytes     Missed
  |-4 bytes     Hit Target (BOOL)
  |-4 bytes     String Length (Hit Solid Sound)
  |-n bytes     Hit Solid Sound
  |-4 bytes     String Length (Hit Shield Sound)
  |-n bytes     Hit Shield Sound
  |-4 bytes     String Length (Miss Sound)
  |-n bytes     Miss Sound
  |-4 bytes     Entry Angle
  |-4 bytes     Started Dying (BOOL)
  |-4 bytes     Passed Target (BOOL)
  |-4 bytes     Type
  |-4 bytes     Broadcast Target (BOOL)
  |-# Extended Info
  |-# -- IF Projectile Type == 01 (Laser/Burst) -- #
    |-4 bytes   (unknown)
    |-4 bytes   Spin
  |-# -- IF Projectile Type == 01 (Laser/Burst) -- #
  |-# -- IF Projectile Type == 04 (Bomb) -- #
    |-4 bytes   (unknown)
    |-4 bytes   (unknown)
    |-4 bytes   (unknown)
    |-4 bytes   (unknown)
    |-4 bytes   (unknown)
  |-# -- IF Projectile Type == 04 (Bomb) -- #
  |-# -- IF Projectile Type == 05 (Beam) -- #
    |-4 bytes   Firing Ship End X
    |-4 bytes   Firing Ship End Y
    |-4 bytes   Target Ship Source X
    |-4 bytes   Target Ship Source Y
    |-4 bytes   Target Ship End X
    |-4 bytes   Target Ship End Y
    |-4 bytes   (unknown) X
    |-4 bytes   (unknown) Y
    |-4 bytes   Swath End X
    |-4 bytes   Swath End Y
    |-4 bytes   Swath Start X
    |-4 bytes   Swath Start Y
    |-4 bytes   (unknown)
    |-4 bytes   Swath Length
    |-4 bytes   (unknown)
    |-4 bytes   (unknown) X
    |-4 bytes   (unknown) Y
    |-4 bytes   (unknown)
    |-4 bytes   (unknown)
    |-4 bytes   (unknown)
    |-4 bytes   (unknown) (BOOL)
    |-4 bytes   (unknown) (BOOL)
    |-4 bytes   (unknown) (BOOL)
    |-4 bytes   (unknown) (BOOL)
    |-4 bytes   (unknown) (BOOL)
  |-# -- IF Projectile Type == 05 (Beam) -- #
|-# -- /IF NOT Type == 00 -- #
Number - 
Number - 
Number - 
Number - 
Number - 
Number - 
Number - 
Number - 
Number - 
Number - 
Number - 
Number - 
Number - 
Number - 
Number - 
Number - 
Number - 
